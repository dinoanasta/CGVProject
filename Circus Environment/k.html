<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>work</title>
    <style>
			body { margin: 0; }
			canvas {
				display:block;
				width:100%;
				height:100%;
			 }
		</style>
  </head>
  <body>
    <script src="../js/three.js"></script>
    <script src="../js/OrbitControls.js"></script>
    <script src = "../js/GLTFLoader.js"></script>
      <script src="../js/physi.js"></script>



        <script>
          Physijs.scripts.worker='../js/physijs_worker.js';
          //Physijs.scripts.ammo='ammo.js';

          var scene=new Physijs.Scene;
          var loader = new THREE.GLTFLoader();
          var mixer = [];
          const clock = new THREE.Clock();

         scene.setGravity(new THREE.Vector3(0,-10,0));
            //var scene=new THREE.Scene();
            //scene.background=new THREE.Color(0xdddddd);

            var camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,15000);
            //camera.rotation.y=45/180*Math.PI;
            camera.position.x=0;
            camera.position.y=0;
            camera.position.z=60;
            camera.lookAt(scene.position);


            var renderer=new THREE.WebGLRenderer({antialias:true});
            renderer.setClearColor(0xff0fff);
            renderer.setSize(window.innerWidth,window.innerHeight);
            document.body.appendChild(renderer.domElement);

            var cubeMap=new THREE.CubeGeometry(7,7,7);
            var material=new THREE.MeshBasicMaterial({color:0xff0000});
            var cubeobj=new Physijs.BoxMesh(cubeMap,material);

            scene.add(cubeobj);

          loader.load("../Models/wolf_with_animations/scene.gltf", function (object) {
              let pup = object.scene.children[0];
              const avatarAnimation = object.animations[0];

              const mix = new THREE.AnimationMixer(pup);
              mixer.push(mix);

              const action = mix.clipAction(avatarAnimation);
              action.play();

              pup.position.y = 20;
              pup.scale.set(10,10,10);
              scene.add(pup);
          });

var controls=new THREE.OrbitControls(camera,renderer.domElement);

function updateFrame() {

    const delta = clock.getDelta();

    for ( const mix of mixer ) {

        mix.update( delta );

    }
}

function animate(){
  updateFrame();
  scene.simulate();
controls.update();
  renderer.render(scene,camera);
  requestAnimationFrame(animate);
}
  requestAnimationFrame(animate);
        </script>


  </body>
</html>
