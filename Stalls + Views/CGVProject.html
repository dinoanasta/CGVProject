<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Carnival</title>

    <style>
        body{
            margin:0;
            overflow: hidden;
        }
        canvas{
            background: #ff0000;

        }

    </style>
</head>
<body>

    <canvas id = "myCanvas"></canvas>

    <script src = "../js/three.js"></script>
    <script>



        var renderer = new THREE.WebGLRenderer({canvas : document.getElementById('myCanvas'), antialias: true});
        renderer.setClearColor(0x00ff00);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setSize(window.innerWidth,window.innerHeight -50);

        var camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1,4000);
        camera.position.z = 1000;

        var scene = new THREE.Scene();

        var light = new THREE.AmbientLight(0xffffff,0.5);
        scene.add(light);

        var light1 = new THREE.PointLight(0xffffff,0.5);
        scene.add(light1);

        var moonStall = makeStall();
        stall.position.z = -300;
        makeText();

        var skeeball = makeBoard();
        skeeball.scale.set(0.75,0.75,0.75);
        stall.add(skeeball);


        scene.add(stall);


        requestAnimationFrame(render);

        function render(){

            //text.rotation.y += 0.01;
            // Animating sphere 1

            renderer.render(scene,camera);
            requestAnimationFrame(render);
        }

        renderer.render(scene,camera);



        function makeBoard(){

            var geometry = new THREE.CubeGeometry(110,200,30);
            var material = new THREE.MeshPhongMaterial({
                color: 'silver'
            });

            var skeeball = new THREE.Mesh(geometry,material);

            var cgeo3 = new THREE.CylinderGeometry(50,50,20,30);
            var mgeo3 = new THREE.MeshBasicMaterial({
                color: 'darkorchid'
            });
            var c3 = new THREE.Mesh(cgeo3,mgeo3);
            c3.position.y = -35;
            c3.position.z = 20;
            c3.rotation.x = Math.PI/2;
            skeeball.add(c3);

            var cgeo = new THREE.CylinderGeometry(15,15,20,20);
            var mgeo = new THREE.MeshBasicMaterial({
                color: 'indigo'
            });
            var c = new THREE.Mesh(cgeo,mgeo);
            c.position.z = 25;
            c.rotation.x = Math.PI/2;
            skeeball.add(c);

            var cgeo1 = new THREE.CylinderGeometry(15,15,20,20);
            var mgeo1 = new THREE.MeshBasicMaterial({
                color: 'indigo'
            });
            var c1 = new THREE.Mesh(cgeo1,mgeo1);
            c1.position.x = 30;
            c1.position.y = 70;
            c1.position.z = 25;
            c1.rotation.x = Math.PI/2;
            skeeball.add(c1);

            var cgeo2 = new THREE.CylinderGeometry(15,15,20,20);
            var mgeo2 = new THREE.MeshBasicMaterial({
                color: 'indigo'
            });
            var c2 = new THREE.Mesh(cgeo1,mgeo1);
            c2.position.x = -30;
            c2.position.y = 70;
            c2.position.z = 25;
            c2.rotation.x = Math.PI/2;
            skeeball.add(c2);

            var cgeo4 = new THREE.CylinderGeometry(13,13,20,20);
            var mgeo4 = new THREE.MeshBasicMaterial({
                color: 'indigo'
            });
            var c4 = new THREE.Mesh(cgeo4,mgeo4);
            c4.position.y = -35;
            c4.position.z = 25;
            c4.rotation.x = Math.PI/2;
            skeeball.add(c4);

            var cgeo5 = new THREE.CylinderGeometry(13,13,20,20);
            var mgeo5 = new THREE.MeshBasicMaterial({
                color: 'indigo'
            });
            var c5 = new THREE.Mesh(cgeo5,mgeo5);
            c5.position.y = 35;
            c5.position.z = 20;
            c5.rotation.x = Math.PI/2;
            skeeball.add(c5);
            skeeball.position.y = -50;

            var geo = new THREE.PlaneGeometry(110,300);
            var mat = new THREE.MeshBasicMaterial({
                color : 'silver'
            });
            var plane = new THREE.Mesh(geo,mat);
            plane.position.y = -100;
            //plane.position.x = -50;
            plane.position.z = 200;
            plane.rotation.x = -Math.PI/2.25;

            skeeball.add(plane);
            //skeeball.rotation.x = -Math.PI/6;

            return skeeball;



            //skeeball.rotation.x = -Math.PI/6;
        }

        function makeText(){

            var loader = new THREE.FontLoader();

            loader.load('js/droid_serif_bold.typeface.json',function (font) {
                var geoText = new THREE.TextBufferGeometry( "1" , {
                    font : font,
                    size : 30,
                    height : 20,
                    curveSegments: 16,
                    bevelEnabled : true,
                    bevelThickness: 5,
                    bevelSize: 5,
                    bevelOffset : 0,
                    bevelSegments: 4

                });

                var matText = new THREE.MeshNormalMaterial({
                    color : 'white'
                })

                var text = new THREE.Mesh(geoText,matText);
                //geoText.computeBoundingBox();
                //geoText.boundingBox.getCenter(text.position).multiplyScalar(-1);
                //geoText.boundingBox.getCenter(text.position).multiplyScalar(-1);


                //text.position.x = 50;
                text.position.y = 230;
                text.position.z = 100;
                stall.add(text);

                requestAnimationFrame(render);

                function render(){

                    text.rotation.y += 0.01;
                    renderer.render(scene,camera);
                    requestAnimationFrame(render);
                }
                renderer.render(scene,camera);
            })
        }


        function makeStall(){

            var moonStall = makeWall2();

            var wall = makeWall();
            wall.position.x = 200;
            wall.position.z = 150;
            wall.rotation.y = Math.PI/2;

            var wall2 = makeWall();
            wall2.position.x = -200;
            wall2.position.z = 150;
            wall2.rotation.y = Math.PI/2;

            var roof = makeRoof();
            roof.position.y = 185;
            roof.position.z = 100;
            roof.rotation.y = Math.PI/4;

            var geo = new THREE.PlaneGeometry(1000,1000);
            var mat = new THREE.MeshBasicMaterial({
                color : 'gray'
            });
            var plane = new THREE.Mesh(geo,mat);
            plane.position.y = -150;
            //plane.position.x = -50;
            plane.position.z = 200;
            plane.rotation.x = -Math.PI/2;

            stall.add(wall);
            stall.add(wall2);
            stall.add(roof);
            stall.add(plane);

            return stall;
        }

        function rotateStall(moonStall){

            stall.position.y = 50;
            stall.position.z = -300;
            stall.rotation.y = -Math.PI/8;
            stall.rotation.x = Math.PI/8;


        }

        function makeRoof(){

            var geometry = new THREE.ConeGeometry(350,75,4);
            var material = new THREE.MeshNormalMaterial();

            return new THREE.Mesh(geometry,material);
        }

        function makeWall2(){

            var geoWall = new THREE.CubeGeometry(400,300,10);
            var matWall = new THREE.MeshNormalMaterial();

            return new THREE.Mesh(geoWall,matWall);
        }

        function makeWall(){

            var geoWall = new THREE.CubeGeometry(300,300,10);
            var matWall = new THREE.MeshNormalMaterial();

            return new THREE.Mesh(geoWall,matWall);
        }


        function doViewCheckbox() {
            var run = document.getElementById("viewCheckbox").checked;
            if (run) {


                camera.rotation.x = -Math.PI/2;
                camera.rotation.z = Math.PI;
                camera.position.x = -300;
                camera.position.y = 3000;
                camera.position.z = -100;

                renderer.render(scene,camera);

            }
        }

        function doRotateCheckbox() {
            var run = document.getElementById("rotateCheckbox").checked;
            if (run) {

                rotateStall(stall);
                renderer.render(scene,camera);

            }
        }
    </script>

    <p>
        <label><input type="checkbox" id="viewCheckbox" onclick="doViewCheckbox()"><b>Birds Eye View</b></label>
        <label><input type="checkbox" id="rotateCheckbox" onclick="doRotateCheckbox()"><b>Angled View</b></label>

    </p>

</body>
</html>